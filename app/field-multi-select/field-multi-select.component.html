<label class="label" [for]="id() + '-filter'" *ngIf="label">{{label}}</label>
<ul *ngIf="model.length" class="existing">
  <li *ngFor="let item of model; let i = index"><button class="item" (click)="remove(i)" [title]="titleFunc(item)">{{titleFunc(item)}}</button></li>
</ul>
<div #select class="select">
  <input [id]="id() + '-filter'" class="filter" [(ngModel)]="filter" [placeholder]="placeholder" (focus)="onFocus()" (blur)="onBlur()"/>
  <ul #options class="options" *ngIf="focus">
    <li class="option noresult" *ngIf="!filteredItems().length && !allowNew">No results found</li>
    <li class="option new" *ngIf="!matchItem() && allowNew"><button class="new item" (click)="new()" (focus)="onFocus()" (blur)="onBlur()">{{filter}} (Create new)</button></li>
    <li *ngFor="let item of filteredItems()" class="option"><button class="add item" (click)="add(item)" (focus)="onFocus()" (blur)="onBlur()">{{titleFunc(item)}}</button></li>
  </ul>
</div>
